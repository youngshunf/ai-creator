# AI Creator - 约束细则

> 法律、安全、平台与技术约束

## 1. 法律合规约束

### 1.1 数据保护法规

```yaml
中国大陆:
  《个人信息保护法》(PIPL):
    - 收集个人信息需明确告知并获得同意
    - 提供数据删除、导出功能
    - 跨境传输需满足安全评估要求

  《网络安全法》:
    - 实名认证要求
    - 日志保留6个月以上
    - 安全等级保护备案

  《数据安全法》:
    - 数据分类分级管理
    - 重要数据出境安全评估

合规要点:
  用户同意:
    - 隐私政策明确告知
    - 敏感操作二次确认
    - 退出机制清晰

  数据最小化:
    - 仅收集必要信息
    - 定期清理过期数据
    - 避免过度权限请求

  数据本地化:
    - 中国用户数据存储在境内
    - 跨境场景需评估
```

### 1.2 内容合规

```yaml
内容审核要求:
  禁止内容:
    - 违反法律法规的内容
    - 虚假信息/谣言
    - 侵权内容（版权、肖像权等）
    - 敏感政治内容
    - 色情/暴力内容

  AI生成内容标识:
    - 依据《互联网信息服务深度合成管理规定》
    - AI生成内容需明确标识
    - 保留生成记录

实现方案:
  前置审核:
    - 敏感词过滤
    - AI内容检测
    - 图片鉴黄

  后置审核:
    - 用户举报机制
    - 定期内容巡检
    - 违规内容下架

  用户责任:
    - 明确用户协议
    - 违规行为处罚
    - 账号封禁机制
```

### 1.3 知识产权

```yaml
版权风险:
  AI生成内容:
    - 当前法律对AI生成内容版权归属尚无定论
    - 建议用户进行人工修改以获得版权保护
    - 明确告知AI辅助性质

  素材使用:
    - 用户上传素材需保证合法性
    - 提供版权声明机制
    - 侵权投诉处理流程

平台应对:
  免责声明:
    - 用户协议中明确责任划分
    - AI生成内容仅供参考
    - 最终责任由用户承担

  DMCA流程:
    - 接收侵权通知
    - 及时下架处理
    - 通知用户申诉
```

---

## 2. 平台政策约束

### 2.1 各平台限制

```yaml
小红书:
  官方态度: 无官方API，容忍自动化
  限制:
    - 频繁发布可能触发风控
    - 内容查重严格
    - 账号异常登录检测
  应对:
    - 发布频率限制（建议≤5篇/天）
    - 内容去重/改写
    - 模拟真实用户行为

抖音:
  官方态度: 有创作者API，但限制较多
  限制:
    - 视频上传需要资质审核
    - 自动化发布受限
    - 敏感内容检测严格
  应对:
    - 优先使用官方API
    - 浏览器自动化作为备选
    - 内容预审核

微信公众号:
  官方态度: 提供官方API
  限制:
    - 每日发布次数限制
    - 需要公众号认证
    - 图片素材需上传到微信服务器
  应对:
    - 使用官方草稿箱API
    - 遵守发布频率限制
    - 素材预处理

微博:
  官方态度: 有开放平台API
  限制:
    - API调用频率限制
    - 认证门槛较高
  应对:
    - 申请开放平台资质
    - API优先，自动化备选

B站:
  官方态度: 有创作者工具
  限制:
    - 视频投稿需要审核
    - 自动化检测较严
  应对:
    - 视频处理后人工审核
    - 发布频率控制
```

### 2.2 风控规避策略

```yaml
通用策略:
  行为模拟:
    - 随机延时（2-10秒）
    - 鼠标轨迹模拟
    - 页面滚动模拟
    - 随机操作顺序

  指纹防护:
    - 浏览器指纹随机化
    - UserAgent轮换
    - Canvas指纹混淆
    - WebGL指纹混淆

  IP策略:
    - 固定IP绑定账号
    - 避免频繁切换IP
    - 住宅IP优先

  账号养护:
    - 新账号预热期（7-14天）
    - 模拟正常用户行为
    - 保持登录活跃度

风险提示:
  明确告知:
    - 自动化发布存在风险
    - 平台可能封禁账号
    - 用户需自行承担后果

  保守策略:
    - 默认启用安全模式
    - 限制高风险操作
    - 提供手动确认选项
```

---

## 3. 技术约束

### 3.1 性能约束

```yaml
响应时间:
  API接口: < 500ms (P95)
  AI创作: < 30s (首次响应 < 3s)
  发布操作: < 60s
  数据查询: < 200ms

并发能力:
  API服务: 1000 QPS
  AI服务: 100 并发
  浏览器池: 50 实例

资源限制:
  单用户:
    - 并发请求: ≤ 10
    - AI请求队列: ≤ 5
    - 文件上传: ≤ 100MB/文件
    - 存储空间: 按套餐限制

  系统:
    - 数据库连接池: 200
    - Redis连接池: 500
    - 浏览器实例: 100
```

### 3.2 可用性约束

```yaml
SLA目标:
  服务可用性: 99.9% (月度)
  数据持久性: 99.999%
  RTO (恢复时间): < 4小时
  RPO (恢复点): < 1小时

容灾策略:
  数据库:
    - 主从复制
    - 每日全量备份
    - 每小时增量备份
    - 跨区域备份

  应用:
    - 多实例部署
    - 健康检查
    - 自动故障转移

  存储:
    - 多副本存储
    - CDN加速
    - 本地缓存
```

### 3.3 安全约束

```yaml
认证授权:
  密码策略:
    - 最小长度: 8位
    - 复杂度: 字母+数字+特殊字符
    - 登录失败锁定: 5次/15分钟

  Token管理:
    - Access Token: 30分钟过期
    - Refresh Token: 7天过期
    - 单设备登录或多设备管理

  权限控制:
    - RBAC权限模型
    - 最小权限原则
    - 操作审计日志

数据安全:
  传输安全:
    - 全站HTTPS
    - TLS 1.3
    - 证书固定（移动端）

  存储安全:
    - 敏感数据加密存储
    - 凭证AES-256-GCM加密
    - 密钥定期轮换

  代码安全:
    - SQL注入防护
    - XSS防护
    - CSRF防护
    - 输入验证
```

---

## 4. 风险与缓解

### 4.1 业务风险

```yaml
平台封禁风险:
  风险描述: 平台检测自动化行为封禁账号
  影响级别: 高
  缓解措施:
    - 保守的自动化策略
    - 用户风险告知
    - 人工确认选项
    - 多账号分散风险

API变更风险:
  风险描述: 平台API/页面结构变更导致功能失效
  影响级别: 中
  缓解措施:
    - 定期监控检测
    - 快速适配机制
    - 备用方案准备
    - 用户及时通知

AI成本失控:
  风险描述: AI调用成本超出预期
  影响级别: 中
  缓解措施:
    - 严格配额控制
    - 实时成本监控
    - 异常告警机制
    - 熔断保护

内容违规风险:
  风险描述: 用户利用AI生成违规内容
  影响级别: 高
  缓解措施:
    - 内容审核过滤
    - 用户协议约束
    - 违规处罚机制
    - 监管配合机制
```

### 4.2 技术风险

```yaml
数据泄露:
  风险描述: 用户数据或凭证泄露
  影响级别: 严重
  缓解措施:
    - 端到端加密
    - 最小权限访问
    - 安全审计
    - 入侵检测

服务中断:
  风险描述: 系统故障导致服务不可用
  影响级别: 高
  缓解措施:
    - 多活架构
    - 自动故障转移
    - 降级方案
    - 应急预案

第三方依赖:
  风险描述: Claude API等第三方服务中断
  影响级别: 高
  缓解措施:
    - 多模型备选
    - 本地缓存
    - 优雅降级
    - 用户通知
```

### 4.3 运营风险

```yaml
用户流失:
  风险描述: 用户不满意导致流失
  影响级别: 中
  缓解措施:
    - 用户反馈机制
    - 持续产品优化
    - 客户成功团队
    - 挽留策略

竞争风险:
  风险描述: 竞品抢占市场
  影响级别: 中
  缓解措施:
    - 差异化功能
    - 用户体验优化
    - 价格竞争力
    - 生态壁垒

合规风险:
  风险描述: 法规变化导致业务受限
  影响级别: 高
  缓解措施:
    - 法规跟踪
    - 合规团队
    - 预留调整空间
    - 多地区部署
```

---

## 5. 安全规范

### 5.1 开发安全规范

```yaml
代码安全:
  敏感信息:
    - 禁止硬编码密钥
    - 使用环境变量
    - 密钥定期轮换

  输入验证:
    - 所有输入必须验证
    - 使用白名单验证
    - 长度和格式限制

  SQL安全:
    - 使用ORM参数化查询
    - 禁止字符串拼接SQL
    - 最小权限数据库账户

  XSS防护:
    - 输出编码
    - CSP策略
    - HttpOnly Cookie

依赖安全:
  - 定期扫描依赖漏洞
  - 及时更新有漏洞的包
  - 最小化依赖

代码审查:
  - PR必须经过审查
  - 安全相关代码专人审查
  - 自动化安全扫描
```

### 5.2 运维安全规范

```yaml
访问控制:
  服务器访问:
    - 禁止root直接登录
    - SSH密钥认证
    - 跳板机访问
    - 操作审计

  数据库访问:
    - 专用账户
    - 最小权限
    - 访问日志
    - 定期审计

监控告警:
  安全监控:
    - 异常登录检测
    - 暴力破解检测
    - 敏感操作告警
    - 流量异常告警

  响应流程:
    - 安全事件分级
    - 响应时间要求
    - 升级机制
    - 事后复盘

备份恢复:
  - 定期备份验证
  - 恢复演练
  - 异地备份
  - 加密备份
```

---

## 6. 用户协议要点

### 6.1 服务条款

```yaml
服务范围:
  - 明确提供的功能和服务
  - AI辅助性质说明
  - 服务可用性承诺

用户责任:
  - 账号安全保管
  - 内容合法性保证
  - 平台规则遵守
  - 合理使用服务

禁止行为:
  - 违法违规内容发布
  - 滥用自动化功能
  - 恶意攻击或破坏
  - 侵犯他人权益

责任限制:
  - 平台不保证发布成功
  - AI生成内容仅供参考
  - 第三方平台风险自担
  - 赔偿上限约定
```

### 6.2 隐私政策

```yaml
信息收集:
  - 收集哪些信息
  - 收集目的说明
  - 收集方式说明

信息使用:
  - 使用场景说明
  - 共享第三方说明
  - 用户画像说明

用户权利:
  - 查询权
  - 更正权
  - 删除权
  - 导出权
  - 撤回同意权

安全措施:
  - 加密存储
  - 访问控制
  - 安全审计
```

---

## 7. 监控与告警

### 7.1 监控指标

```yaml
系统监控:
  基础指标:
    - CPU使用率: > 80% 告警
    - 内存使用率: > 85% 告警
    - 磁盘使用率: > 90% 告警
    - 网络带宽: > 80% 告警

  应用指标:
    - API响应时间: P95 > 1s 告警
    - 错误率: > 1% 告警
    - QPS异常: 波动 > 50% 告警

业务监控:
  核心流程:
    - AI创作成功率: < 95% 告警
    - 发布成功率: < 90% 告警
    - 支付成功率: < 99% 告警

  用户行为:
    - 异常登录检测
    - 异常调用检测
    - 配额滥用检测
```

### 7.2 告警级别

```yaml
P0 - 紧急:
  条件: 核心服务完全不可用
  响应时间: 5分钟
  处理人: 全员

P1 - 严重:
  条件: 核心功能严重受损
  响应时间: 15分钟
  处理人: 值班工程师

P2 - 警告:
  条件: 非核心功能异常
  响应时间: 1小时
  处理人: 相关团队

P3 - 通知:
  条件: 指标轻微异常
  响应时间: 工作时间内
  处理人: 相关团队
```

---

## 相关文档

- [系统架构](./01-系统架构.md)
- [云端服务设计](./04-云端服务设计.md)
- [商业模式](./09-商业模式.md)
